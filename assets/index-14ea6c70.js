import{I as _,d as U,r as V,c as j,D as z,e as o,J as B,o as p,f as E,g as l,w as t,A as b,v as y,j as c,t as O,L as u,_ as I}from"./index-f4238ceb.js";const N=()=>_.get("/admin/acl/permission"),T=i=>i.id?_.put("/admin/acl/permission/update",i):_.post("/admin/acl/permission/save",i),H=i=>_.delete("/admin/acl/permission/remove/"+i),J=U({__name:"index",setup(i){const g=V([]),d=V(),n=j({code:"",level:0,name:"",pid:0});z(()=>{f()});const f=async()=>{const a=await N();a.code==200&&(g.value=a.data)},P=a=>{Object.assign(n,{id:0,code:"",level:0,name:"",pid:0}),d.value=!0,n.level=a.level+1,n.pid=a.id},D=a=>{d.value=!0,Object.assign(n,a)},$=async()=>{(await T(n)).code==200?(d.value=!1,u({type:"success",message:n.id?"编辑成功":"添加成功"}),f()):u({type:"error",message:n.id?"编辑失败":"添加失败"})},h=async a=>{(await H(a)).code==200?(u({type:"success",message:"删除成功"}),f()):u({type:"error",message:"删除失败"})};return(a,s)=>{const m=o("el-table-column"),r=o("el-button"),M=o("el-popconfirm"),q=o("el-table"),x=o("el-input"),k=o("el-form-item"),w=o("el-form"),A=o("el-dialog"),v=B("has");return p(),E("div",null,[l(q,{data:g.value,"row-key":"id","expand-row-keys":"",border:"",class:"table"},{default:t(()=>[l(m,{label:"名称",prop:"name",width:"180px"}),l(m,{label:"权限数值",prop:"code",width:"200px",align:"center"}),l(m,{label:"修改时间",prop:"updateTime",width:"200px",align:"center"}),l(m,{label:"操作",align:"center"},{default:t(({row:e,$index:L})=>[b((p(),y(r,{onClick:C=>P(e),type:e.level==3?"success":"primary",size:"small",icon:"Plus",disabled:e.level==4},{default:t(()=>[c(O(e.level==3?"添加功能":"添加菜单"),1)]),_:2},1032,["onClick","type","disabled"])),[[v,"btn.Permission.add"]]),b((p(),y(r,{onClick:C=>D(e),type:"info",size:"small",icon:"Edit",disabled:e.level==1},{default:t(()=>[c("编辑")]),_:2},1032,["onClick","disabled"])),[[v,"btn.Permission.update"]]),l(M,{title:`确定删除${e.name}吗?`,onConfirm:C=>h(e.id),width:"220px",icon:"Delete","icon-color":"red","hide-after":10},{reference:t(()=>[b((p(),y(r,{type:"danger",size:"small",icon:"Delete",disabled:e.level==1},{default:t(()=>[c("删除")]),_:2},1032,["disabled"])),[[v,"btn.Permission.remove"]])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),l(A,{modelValue:d.value,"onUpdate:modelValue":s[3]||(s[3]=e=>d.value=e),title:n.id?"编辑菜单":"添加菜单"},{footer:t(()=>[l(r,{type:"primary",plain:"",onClick:s[2]||(s[2]=e=>d.value=!1)},{default:t(()=>[c("取消")]),_:1}),l(r,{type:"primary",onClick:$},{default:t(()=>[c("确定")]),_:1})]),default:t(()=>[l(w,null,{default:t(()=>[l(k,{label:"菜单名称"},{default:t(()=>[l(x,{placeholder:"请输入菜单名称",modelValue:n.name,"onUpdate:modelValue":s[0]||(s[0]=e=>n.name=e)},null,8,["modelValue"])]),_:1}),l(k,{label:"权限数值"},{default:t(()=>[l(x,{placeholder:"请输入权限数值",modelValue:n.code,"onUpdate:modelValue":s[1]||(s[1]=e=>n.code=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])}}});const S=I(J,[["__scopeId","data-v-a3624350"]]);export{S as default};
