import{I as k,d as R,r as f,D as G,e as o,J as O,o as d,f as S,g as e,w as t,m as V,A as h,j as c,t as g,F as I,q as D,v as N,L as v,p as Q,k as W,_ as X}from"./index-f4238ceb.js";const Y=(n,p)=>k.get(`/admin/product/list/${n}/${p}`),Z=n=>k.get("/admin/product/onSale/"+n),ee=n=>k.get("/admin/product/cancelSale/"+n),te=n=>k.get("/admin/product/getSkuInfo/"+n),ae=n=>k.delete("/admin/product/deleteSku/"+n),le=n=>(Q("data-v-b9fefcab"),n=n(),W(),n),ne={style:{"margin-top":"-23px"}},se=["src"],oe=le(()=>V("h4",null,"查看商品的详情",-1)),ue=["src"],ce=R({__name:"index",setup(n){const p=f(1),b=f(3),z=f(),w=f([]),C=f(!1),r=f({});G(()=>{_()});const _=async(u=1)=>{p.value=u;const l=await Y(p.value,b.value);console.log("SKU数据获取成功",l),l.code==200&&(z.value=l.data.total,w.value=l.data.records)},L=u=>{_()},A=async u=>{u.isSale==1?(await ee(u.id),v({type:"success",message:"下架成功"}),_(p.value)):(await Z(u.id),v({type:"success",message:"上架成功"}),_(p.value))},B=()=>{v({type:"success",message:"程序员在努力更新中..."})},U=async u=>{C.value=!0;const l=await te(u.id);console.log("商品详情获取成功",l),r.value=l.data},E=async u=>{(await ae(u)).code==200?(v({type:"success",message:"删除成功"}),_(w.value.length>1?p.value:p.value-1)):v({type:"error",message:"系统数据不能删除"})};return(u,l)=>{const i=o("el-table-column"),x=o("el-button"),F=o("el-popconfirm"),j=o("el-table"),M=o("el-pagination"),s=o("el-col"),m=o("el-row"),$=o("el-tag"),T=o("el-carousel-item"),H=o("el-carousel"),J=o("el-drawer"),K=o("el-card"),y=O("has");return d(),S("div",ne,[e(K,{style:{margin:"10px 0px"}},{default:t(()=>[e(j,{border:"",data:w.value},{default:t(()=>[e(i,{label:"序号",type:"index",align:"center",width:"80px"}),e(i,{label:"名称",width:"150px","show-overflow-tooltip":"",prop:"skuName"}),e(i,{label:"描述","show-overflow-tooltip":"",prop:"skuDesc"}),e(i,{label:"默认图片"},{default:t(({row:a,$index:P})=>[V("img",{src:a.skuDefaultImg,style:{width:"100px",height:"100px"}},null,8,se)]),_:1}),e(i,{label:"重量(g)",prop:"weight"}),e(i,{label:"价格(元)",prop:"price"}),e(i,{label:"操作",width:"250px"},{default:t(({row:a,$index:P})=>[h(e(x,{type:a.isSale==1?"success":"info",icon:a.isSale==1?"Bottom":"Top",onClick:q=>A(a)},null,8,["type","icon","onClick"]),[[y,"btn.Sku.updown"]]),h(e(x,{type:"primary",icon:"Edit",onClick:B},null,512),[[y,"btn.Sku.update"]]),h(e(x,{type:"info",icon:"infoFilled",onClick:q=>U(a)},null,8,["onClick"]),[[y,"btn.Sku.detail"]]),e(F,{title:`确定删除${a.skuName}吗?`,onConfirm:q=>E(a.id),width:"170px",icon:"Delete","icon-color":"red","hide-after":10},{reference:t(()=>[h(e(x,{type:"danger",icon:"Delete"},null,512),[[y,"btn.Sku.remove"]])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(M,{"current-page":p.value,"onUpdate:currentPage":l[0]||(l[0]=a=>p.value=a),"page-size":b.value,"onUpdate:pageSize":l[1]||(l[1]=a=>b.value=a),"page-sizes":[3,5,6,10],background:!0,layout:"prev, pager, next, jumper, ->, sizes, total",total:z.value,onCurrentChange:_,onSizeChange:L,style:{"margin-top":"6px"}},null,8,["current-page","page-size","total"]),e(J,{modelValue:C.value,"onUpdate:modelValue":l[2]||(l[2]=a=>C.value=a)},{header:t(()=>[oe]),default:t(()=>[e(m,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[c("名称")]),_:1}),e(s,{span:18},{default:t(()=>[c(g(r.value.skuName),1)]),_:1})]),_:1}),e(m,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[c("描述")]),_:1}),e(s,{span:18},{default:t(()=>[c(g(r.value.skuDesc),1)]),_:1})]),_:1}),e(m,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[c("价格")]),_:1}),e(s,{span:18},{default:t(()=>[c(g(r.value.price),1)]),_:1})]),_:1}),e(m,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[c("平台属性")]),_:1}),e(s,{span:18},{default:t(()=>[(d(!0),S(I,null,D(r.value.skuAttrValueList,a=>(d(),N($,{style:{margin:"5px"},key:a.id},{default:t(()=>[c(g(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(m,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[c("销售属性")]),_:1}),e(s,{span:18},{default:t(()=>[(d(!0),S(I,null,D(r.value.skuSaleAttrValueList,a=>(d(),N($,{style:{margin:"5px"},key:a.id},{default:t(()=>[c(g(a.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(m,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[c("商品图片")]),_:1}),e(s,{span:18},{default:t(()=>[e(H,{interval:4e3,type:"card",height:"200px"},{default:t(()=>[(d(!0),S(I,null,D(r.value.skuImageList,a=>(d(),N(T,{key:a.id},{default:t(()=>[V("img",{src:a.imgUrl,style:{width:"100%",height:"100%"}},null,8,ue)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}});const re=X(ce,[["__scopeId","data-v-b9fefcab"]]);export{re as default};
